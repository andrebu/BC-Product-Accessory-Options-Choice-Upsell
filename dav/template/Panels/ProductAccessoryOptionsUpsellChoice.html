<script type="text/javascript">
    $('<style type="text/css">\
			/* Product Accessory Options Upsell Choice */\
			.accessoryOptionsSelection .productOptionPickListSwatch ul {\
				margin: 0 auto;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture {\
				vertical-align: middle;\
				width: 28%;\
				border: 5px solid #eee !important;\
				border-radius: 7px;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture label {\
				max-width: 100%;\
				padding: 3px;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture.selectedValue {\
				border-color: #39b54a !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .textureContainer {\
				max-width: 100%;\
				width: 100% !important;\
				border: 0 !important;\
				padding: 0 !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .textureContainer .thumbnail {\
				max-width: 100%;\
				margin: 0 auto;\
				display: block;\
			}\
			/*\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(1) {\
				margin-right:10px !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(2) {\
				margin-right:10px !important;\
			}\
			*/\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .name {\
				display: block !important;\
				max-width: 120px;\
				font-size: 12px;\
				/*height: 40px;*/\
				line-height: 1.3;\
				text-align: center;\
				margin: 0 auto !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .preview {\
				display: none;\
			}\
			@media screen and (max-width: 767px) {\
				.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(1) .textureContainer {\
					margin-right:4% !important;\
				}\
				.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(2) .textureContainer {\
					margin-right:4% !important;\
				}\
			}\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch .swatchOneColour,\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch .textureContainer,\
			.productSizeSelection .productOptionViewRectangle .list-horizontal li.option label {\
				border: 4px solid #eee !important;\
				border-radius: 3px;\
			}\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch:hover .swatchOneColour,\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch:hover .textureContainer,\
			.productSizeSelection .productOptionViewRectangle .list-horizontal li.option:hover label {\
				border: 4px solid #484848 !important;\
			}\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch.selectedValue .swatchOneColour,\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch.selectedValue .textureContainer,\
			.productSizeSelection .productOptionViewRectangle .list-horizontal li.option.selectedValue label {\
				border: 4px solid #39B54A !important;\
			}\
			/* HTML changes were made on Panels/ProductDetails.html */\
			#ProductDetails .ProductMain #desktopProductHeading {\
				margin-bottom: 10px;\
			}\
			#ProductDetails .ProductMain .DetailRow.PriceRow.p-price {\
				display: inline-block;\
				margin-bottom: 6px;\
			}\
			#ProductDetails .ProductMain .yotpo.bottomLine.yotpo-small {\
				display: inline-block;\
				position: absolute;\
				right: 0;\
			}\
			</style>')
        .appendTo('head');

	function producPageImprovements() {
//This function improves the Color or Size Options selection on Product Pages
		function productPageSizeSelectionImprovements() {
			var productSizeSelectionName = $('.productAttributeConfigurablePickListSet .productAttributeLabel .name:contains("Joint Size:")');
			productSizeSelectionName.css({
				'font-family' : 'tahoma',
				'font-size' : '14px',
				'font-weight' : '700',
				'text-transform' : 'uppercase',
				'color' : '#39b54a',
			});
			productSizeSelectionName.parent().css({
				'text-align' : 'center',
				'padding' : '0',
			});
			var mainSizeContainer = productSizeSelectionName.parents().eq(2);
			mainSizeContainer.addClass('productSizeSelection');
			$('.productSizeSelection').find('.required').hide();
			var sizeSelectionListItems = mainSizeContainer.find('.productOptionViewRectangle li.option');
			//sizeSelectionListItems.find('label').css('margin-bottom', '0');
			sizeSelectionListItems.find('label').attr({style: 'margin-bottom: 0 !important;'});
			var ulSizeSelectionWidth = 0;
			sizeSelectionListItems.each(function() {
			    ulSizeSelectionWidth = ulSizeSelectionWidth + $(this).width()
			    console.log(ulSizeSelectionWidth);
			});
			sizeSelectionListItems.parent().css({
				'width' : (ulSizeSelectionWidth + 14),
				'margin' : '0 auto',
			});
		};
		productPageSizeSelectionImprovements();
		
//This function improves the Color or Size Options selection on Product Pages
		function productPageColorSwatchImprovements() {
			var productColorChoiceName = $('.productAttributeConfigurablePickListSwatch .productAttributeLabel .name:contains("Color:")');
			productColorChoiceName.css({
				'font-family' : 'tahoma',
				'font-size' : '14px',
				'font-weight' : '700',
				'text-transform' : 'uppercase',
				'color' : '#39b54a',
			});
			productColorChoiceName.parent().css({
				'text-align' : 'center',
				'padding' : '0',
			});
			var mainColorChoiceContainer = productColorChoiceName.parents().eq(2);
			mainColorChoiceContainer.addClass('productColorChoiceSelection');
			$('.productColorChoiceSelection').find('.required').hide();
			var colorChoiceListItems = mainColorChoiceContainer.find('.productOptionPickListSwatch li.swatch');
			colorChoiceListItems.find('label').css('margin-bottom', '0');
			var ulColorChoiceWidth = 0;
			colorChoiceListItems.each(function() {
			    ulColorChoiceWidth = ulColorChoiceWidth + $(this).width()
			});

/*
			var optionPreview = $(this).parents().eq(1).find('.previewContent');
			optionPreview.remove();
*/

			colorChoiceListItems.parent().css({
				'width' : (ulColorChoiceWidth + 14),
				'margin' : '0 auto',
			});
		};
		productPageColorSwatchImprovements();
			
//This function improves the Accessory Choice Selection on Product Pages
		function productAccessoryChoice() {
			var productAccessoryChoiceExistance = $('.productAttributeConfigurablePickListSwatch .productAttributeLabel .name:contains("Choose one:")');
			productAccessoryChoiceExistance.parents().eq(2).addClass('accessoryOptionsSelection');
			if (productAccessoryChoiceExistance.length) {
				var rquiredOptionAsterisk = productAccessoryChoiceExistance.parents().eq(2).find('.productAttributeLabel .required');
				rquiredOptionAsterisk.hide();
				productAccessoryChoiceExistance.parent().css({
					'text-align' : 'center',
					'text-transform' : 'uppercase',
					'color' : '#39b54a',
					'font-weight' : '700',
				});
				var optionThumbnails = productAccessoryChoiceExistance.parents().eq(2).find('.swatchTexture .textureContainer .thumbnail');
				optionThumbnails.each(function() {
					var optionImage = $(this).parents().eq(1).find('.previewContent .preview');
					var optionImageContainerSpan = $(this).parent();
					var optionImageUrl = optionImage.attr('src');
					//  height: 125px !important;
					$(this).attr({style: 'background-image: url("' + optionImageUrl + '"); width: 98% !important; height: 125px !important;'});
					var optionPreview = $(this).parents().eq(1).find('.previewContent');
					optionPreview.remove();
				})
				var optionListItem = productAccessoryChoiceExistance.parents().eq(2).find('li.swatchTexture');
	            optionListItem.on({
	                mouseenter: function(event) {
	                    if (!$(this).hasClass('selectedValue')) {
		                    $(this).attr({style: 'border: 5px solid #484848 !important'});
	                    }
	                },
	                mouseleave: function(event) {
	                    $(this).attr({style: ''});
	                },
	                click: function(event) {
	                    $(this).attr({style: 'border: 5px solid #39b54a !important'});
	                }
	            });
				// Find the width of all list items and set their ul to this width
				function optionsUlSetter() {
//					var optionChoiceUlWidth = 0;
//					optionThumbnails.parents('.swatchTexture').each(function() {
//					    optionChoiceUlWidth = optionChoiceUlWidth + $(this).width();
//					});
					var optionChoiceUl = optionThumbnails.parents('.productOptionPickListSwatch ul');
					console.log(optionChoiceUl);
					var optionChoiceUlWidth = optionThumbnails.parents('.productOptionPickListSwatch').width() - 20;
					console.log(optionChoiceUlWidth);
					optionChoiceUl.css('width', optionChoiceUlWidth);
				};
				optionsUlSetter();
				// Find the tallest .name span and set the others to same height
				function optionNameSpanHeightSetter() {
		            var highestOptionNameSpan = null;
					var highestSpan = 0;
					var optionNameSpan = optionListItem.find('.name');
					optionNameSpan.each(function() {
						if (highestOptionNameSpan == null) {
								highestOptionNameSpan = $(this);
								highestSpan = $(this).height();
							}
						else if ($(this).height() > highestSpan) {
							highestOptionNameSpan = $(this);
							highestSpan = $(this).height();
						}
					});
					optionNameSpan.css('height', highestSpan);
				};
				optionNameSpanHeightSetter();
				$( window ).bind("resize", function(){
					optionNameSpanHeightSetter();
					optionsUlSetter();
				});
			}
		};
		productAccessoryChoice();
	};

	$(document).ready(function() {
		producPageImprovements();
	});
</script>