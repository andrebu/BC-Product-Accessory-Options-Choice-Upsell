<script type="text/javascript">
    $('<style type="text/css">\
			/* Product Page Overhaul and Options Upsell Choice */\
			.PrimaryProductDetails .ProductMain {\
				padding: 0 0 0 37px;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch ul {\
				margin: 0 auto;\
				font-size: 0;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture {\
				vertical-align: middle;\
				box-sizing: border-box;\
				border: 5px solid #eee !important;\
				border-radius: 7px;\
				width: 28%;\
				width: calc(98% / 3);\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture label {\
				max-width: 100%;\
				padding: 3px;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture.selectedValue {\
				border-color: #39b54a !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .textureContainer {\
				max-width: 100%;\
				width: 100% !important;\
				border: 0 !important;\
				padding: 0 !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .textureContainer .thumbnail {\
				max-width: 100%;\
				margin: 0 auto;\
				display: block;\
				width: 98% !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(1) {\
				margin-right:1% !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(2) {\
				margin-right:1% !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .name {\
				display: block !important;\
				max-width: 120px;\
				font-size: 0.9vw;\
				/*height: 40px;*/\
				line-height: 1.3;\
				text-align: center;\
				margin: 0 auto !important;\
			}\
			.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture .preview {\
				display: none;\
			}\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch .swatchOneColour,\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch .textureContainer,\
			.productSizeSelection .productOptionViewRectangle .list-horizontal li.option label {\
				border: 4px solid #eee !important;\
				border-radius: 3px;\
			}\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch:hover .swatchOneColour,\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch:hover .textureContainer,\
			.productSizeSelection .productOptionViewRectangle .list-horizontal li.option:hover label {\
				border: 4px solid #484848 !important;\
			}\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch.selectedValue .swatchOneColour,\
			.productColorChoiceSelection .productOptionPickListSwatch li.swatch.selectedValue .textureContainer,\
			.productSizeSelection .productOptionViewRectangle .list-horizontal li.option.selectedValue label {\
				border: 4px solid #39B54A !important;\
			}\
			/* HTML changes were made on Panels/ProductDetails.html */\
			#ProductDetails .ProductMain #desktopProductHeading {\
				margin-bottom: 10px;\
			}\
			#ProductDetails .ProductMain .DetailRow.PriceRow.p-price {\
				display: inline-block;\
				margin-bottom: 6px;\
			}\
			#ProductDetails .ProductMain .yotpo.bottomLine.yotpo-small {\
				display: inline-block;\
				position: absolute;\
				right: 0;\
			}\
			.DetailRow.qty {\
				display: flex;\
				flex-direction: row;\
			}\
			.addto {\
				display: inline-block;\
				vertical-align: middle;\
				margin: 0;\
				padding: 0;\
				border: 0;\
				flex-grow: 1;\
			}\
			.DetailRow.InventoryLevel {\
				display: inline-block;\
				vertical-align: middle;\
				margin: 0;\
				width: 76%;\
				float: right;\
				flex-grow: 1;\
			}\
			.OutOfStockMessage #InStockNotifyInline {\
				margin-bottom: 10px;\
			}\
			.OutOfStockMessage #InStockNotifyInline #InStockNotifyOutOfStock {\
				font-size: 12px;\
				font-weight: normal;\
			}\
			.OutOfStockMessage #InStockNotifyInline #InStockNotifyEmailAddress {\
				color: #666666 !important;\
				background: #f8f8f8;\
			}\
			.OutOfStockMessage #InStockNotifyInline #InStockNotifyClick {\
				text-shadow: none;\
				box-shadow: none;\
				font-family: Questrial;\
				font-weight: normal;\
				position: relative;\
				-webkit-box-sizing: border-box;\
				-moz-box-sizing: border-box;\
				box-sizing: border-box;\
				border: 2px solid #39b54a;\
				-webkit-transition: all 0.3s;\
				-moz-transition: all 0.3s;\
				transition: all 0.3s;\
				margin: 0;\
			}\
			.OutOfStockMessage #InStockNotifyInline #InStockNotifyClick:hover {\
				background-color: #fff;\
				color: #39b54a;\
			}\
			#SideProductAddToWishList {\
				margin-bottom: 10px;\
			}\
			@media screen and (max-width: 767px) {\
				.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(1) .textureContainer {\
					margin-right:4% !important;\
				}\
				.accessoryOptionsSelection .productOptionPickListSwatch .swatchTexture:nth-of-type(2) .textureContainer {\
					margin-right:4% !important;\
				}\
			}\
			</style>')
        .appendTo('head');

	//jQuery Styles function
	(function($) {    
	  if ($.fn.style) {
	    return;
	  }
	
	  // Escape regex chars with \
	  var escape = function(text) {
	    return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
	  };
	
	  // For those who need them (< IE 9), add support for CSS functions
	  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;
	  if (!isStyleFuncSupported) {
	    CSSStyleDeclaration.prototype.getPropertyValue = function(a) {
	      return this.getAttribute(a);
	    };
	    CSSStyleDeclaration.prototype.setProperty = function(styleName, value, priority) {
	      this.setAttribute(styleName, value);
	      var priority = typeof priority != 'undefined' ? priority : '';
	      if (priority != '') {
	        // Add priority manually
	        var rule = new RegExp(escape(styleName) + '\\s*:\\s*' + escape(value) +
	            '(\\s*;)?', 'gmi');
	        this.cssText =
	            this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');
	      }
	    };
	    CSSStyleDeclaration.prototype.removeProperty = function(a) {
	      return this.removeAttribute(a);
	    };
	    CSSStyleDeclaration.prototype.getPropertyPriority = function(styleName) {
	      var rule = new RegExp(escape(styleName) + '\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?',
	          'gmi');
	      return rule.test(this.cssText) ? 'important' : '';
	    }
	  }
	
	  // The style function
	  $.fn.style = function(styleName, value, priority) {
	    // DOM node
	    var node = this.get(0);
	    // Ensure we have a DOM node
	    if (typeof node == 'undefined') {
	      return this;
	    }
	    // CSSStyleDeclaration
	    var style = this.get(0).style;
	    // Getter/Setter
	    if (typeof styleName != 'undefined') {
	      if (typeof value != 'undefined') {
	        // Set style property
	        priority = typeof priority != 'undefined' ? priority : '';
	        style.setProperty(styleName, value, priority);
	        return this;
	      } else {
	        // Get style property
	        return style.getPropertyValue(styleName);
	      }
	    } else {
	      // Get CSSStyleDeclaration
	      return style;
	    }
	  };
	})(jQuery);

	function producPageImprovements() {
//This function improves the Color or Size Options selection on Product Pages
		function productPageChooseOptions() {
			var chooseOptionsnName = $('.productAttributeConfigurablePickListSet .productAttributeLabel .name:contains("Choose Options:")');
			chooseOptionsnName.css({
				'font-family' : 'tahoma',
				'font-size' : '14px',
				'font-weight' : '700',
				'text-transform' : 'uppercase',
				'color' : '#39b54a',
			});
			chooseOptionsnName.parent().css({
				'text-align' : 'center',
				'padding' : '0',
			});
			var mainChooseOptionsContainer = chooseOptionsnName.parents().eq(2);
			mainChooseOptionsContainer.addClass('productChooseOptions');
			$('.productChooseOptions').find('.required').hide();
		};
		productPageChooseOptions();
		
//This function improves the Color or Size Options selection on Product Pages
		function productPageSizeSelectionImprovements() {
			var productSizeSelectionName = $('.productAttributeConfigurablePickListSet .productAttributeLabel .name:contains("Joint Size:")');
			productSizeSelectionName.css({
				'font-family' : 'tahoma',
				'font-size' : '14px',
				'font-weight' : '700',
				'text-transform' : 'uppercase',
				'color' : '#39b54a',
			});
			productSizeSelectionName.parent().css({
				'text-align' : 'center',
				'padding' : '0',
			});
			var mainSizeContainer = productSizeSelectionName.parents().eq(2);
			mainSizeContainer.addClass('productSizeSelection');
			$('.productSizeSelection').find('.required').hide();
			var sizeSelectionListItems = mainSizeContainer.find('.productOptionViewRectangle li.option');
			//sizeSelectionListItems.find('label').css('margin-bottom', '0');
			sizeSelectionListItems.find('label').attr({style: 'margin-bottom: 0 !important;'});
			var ulSizeSelectionWidth = 0;
			sizeSelectionListItems.each(function() {
			    ulSizeSelectionWidth = ulSizeSelectionWidth + $(this).width()
			    console.log(ulSizeSelectionWidth);
			});
			sizeSelectionListItems.parent().css({
				'width' : (ulSizeSelectionWidth + 14),
				'margin' : '0 auto',
			});
		};
		productPageSizeSelectionImprovements();
		
//This function improves the Color or Size Options selection on Product Pages
		function productPageColorSwatchImprovements() {
			var productColorChoiceName = $('.productAttributeConfigurablePickListSwatch .productAttributeLabel .name:contains("Color:")');
			productColorChoiceName.css({
				'font-family' : 'tahoma',
				'font-size' : '14px',
				'font-weight' : '700',
				'text-transform' : 'uppercase',
				'color' : '#39b54a',
			});
			productColorChoiceName.parent().css({
				'text-align' : 'center',
				'padding' : '0',
			});
			var mainColorChoiceContainer = productColorChoiceName.parents().eq(2);
			mainColorChoiceContainer.addClass('productColorChoiceSelection');
			$('.productColorChoiceSelection').find('.required').hide();
			var colorChoiceListItems = mainColorChoiceContainer.find('.productOptionPickListSwatch li.swatch');
			colorChoiceListItems.find('label').css('margin-bottom', '0');
			var ulColorChoiceWidth = 0;
			colorChoiceListItems.each(function() {
			    ulColorChoiceWidth = ulColorChoiceWidth + $(this).width()
			});

/*
			var optionPreview = $(this).parents().eq(1).find('.previewContent');
			optionPreview.remove();
*/

			colorChoiceListItems.parent().css({
				'width' : (ulColorChoiceWidth + 14),
				'margin' : '0 auto',
			});
		};
		productPageColorSwatchImprovements();
			
//This function improves the Accessory Choice Selection on Product Pages
		function productAccessoryChoice() {
			var productAccessoryChoiceExistance = $('.productAttributeConfigurablePickListSwatch .productAttributeLabel .name:contains("Choose one:")');
			productAccessoryChoiceExistance.parents().eq(2).addClass('accessoryOptionsSelection');
			if (productAccessoryChoiceExistance.length) {
				var rquiredOptionAsterisk = productAccessoryChoiceExistance.parents().eq(2).find('.productAttributeLabel .required');
				rquiredOptionAsterisk.hide();
				productAccessoryChoiceExistance.parent().css({
					'text-align' : 'center',
					'text-transform' : 'uppercase',
					'color' : '#39b54a',
					'font-weight' : '700',
				});
				// Create the thumbnails object with URLs as values and corresponding option names as index
				var optionThumbnails = productAccessoryChoiceExistance.parents().eq(2).find('.swatchTexture .textureContainer .thumbnail');
				optionThumbUrlObject = {};				
				optionThumbnails.each(function() {
					var optionName = $(this).parent().parent().find('.name').text();
					var optionImage = $(this).parents().eq(1).find('.previewContent .preview');
					var optionImageUrl = optionImage.attr('src');
					var thumbWidth = $(this).width();
					var thumbHeight = thumbWidth * 1.25;
					$(this).attr({style: 'background-image: url("' + optionImageUrl + '"); height: ' + thumbHeight + 'px !important;'});
					optionThumbUrlObject[optionName] = optionImageUrl;
				});
				// Dynamically set the thumbnail height as width*1.25
				function thumbHeightSetter() {
					optionThumbnails.each(function() {
							var optionName = $(this).parent().parent().find('.name').text();
							var thumbWidth = $(this).width();
							var thumbHeight = thumbWidth * 1.25;
							$(this).attr({style: 'background-image: url("' + optionThumbUrlObject[optionName] + '"); height: ' + thumbHeight + 'px !important;'});
					});
				};
				thumbHeightSetter();
				// Remove preview popup boxes from product accessory choice after the image URL are retrieved and stored
				var optionPreview = $('.accessoryOptionsSelection .previewContent');
				optionPreview.remove();
				// Define the mouse  hover behavior for the accessory option choice list items
				var optionListItem = productAccessoryChoiceExistance.parents().eq(2).find('li.swatchTexture');
	            optionListItem.on({
	                mouseenter: function(event) {
	                    if (!$(this).hasClass('selectedValue')) {
		                    $(this).attr({style: 'border: 5px solid #484848 !important'});
	                    }
	                },
	                mouseleave: function(event) {
	                    $(this).attr({style: ''});
	                },
	                click: function(event) {
	                    $(this).attr({style: 'border: 5px solid #39b54a !important'});
	                }
	            });
				// Find the width of all list items and set their ul to this width
				function optionsUlWidthSetter() {
					var optionChoiceUl = optionThumbnails.parents('.productOptionPickListSwatch ul');
					var optionChoiceUlWidth = optionThumbnails.parents('.productOptionPickListSwatch').width() - 20;
					optionChoiceUl.css('width', optionChoiceUlWidth);
				};
				//optionsUlWidthSetter();
				// Find the tallest .name span and set the others to same height
				function optionNameSpanHeightSetter() {
		            var highestOptionNameSpan = null;
					var highestSpan = 0;
					var optionNameSpan = optionListItem.find('.name');
					optionNameSpan.each(function() {
						if (highestOptionNameSpan == null) {
								highestOptionNameSpan = $(this);
								highestSpan = $(this).height();
							}
						else if ($(this).height() > highestSpan) {
							highestOptionNameSpan = $(this);
							highestSpan = $(this).height();
						}
					});
					optionNameSpan.css('height', highestSpan);
				};
				optionNameSpanHeightSetter();
				// Sold Out Products edits
				function soldOutProducts() {
					if ($('.VariationProductInventory:contains("Sold out!")').length) {
						$('.shareSlide').hide();
					}
					var soldOutButton = $('.VariationProductInventory:contains("Sold out!")').parents('.InventoryLevel');
					var quantitySelectorBox = $('.DetailRow.qty .addto');
					soldOutButton.insertAfter(quantitySelectorBox);
				};
				soldOutProducts();
				// Call all the resizing functions upon window resize
				$( window ).bind("resize", function(){
					optionNameSpanHeightSetter();
					//optionsUlWidthSetter();
					thumbHeightSetter();
				});
			}
		};
		productAccessoryChoice();
	};

	$(document).ready(function() {
		producPageImprovements();
	});
</script>